# Integration Smoke Tests
This test suite is designed to give quick feedback on the health of pages and routes in the app. 

## Configuration
There are 3 parts to configuration:

### Browsers to test
This is currently a placeholder for future support of multiple browsers. At the moment only Chrome is supported.
In visual-smoke-test.js there is a browsers variable that is an Array of browser strings to run the smoke tests against. More browsers can be added to this list. Availbale browsers are: 'chrome'.

### Screen formats to test
To test that the application looks correct in different screen sizes, the tests can be run across multiple browser viewport sizes. The viewport sizes to e tested are configured in the screenFormats variable.

### Routes to test
In visual-smoke-test.js there is a routes variable that is an Array of route url strings to run the smoke tests against. Each page/route to be tested should have an entry in this list. Include full route including any route parameters. e.g.

    const routes = [
        'app',
        'app/login',
        'app/employee/34/details',
    ];

## Tests
The tests work by taking a screen shot of a route, in a specific browser, at a specific viewport size. The resulting screen shot for that route, browser and viewport size, is compared against a baseline screen shot. The the screen shots do not match 100% then the tests fail.

## Generating baseline screen shots
There are occasions when a baseline screen shot will not exist (the first time the tests are run, new routes, etc.). If the test does not detect a baseline for any screen shot, one is created and te test passes.

Committing to a repository:
 - Baseline screen shots should be committed to the repository.
 - Current screen shots should NOT be committed to the repository. test/integration/screenshots-current should be added to the repository ignore list.
 - Before committing screen shot, double check that the screen shots look correct.

## Generating new baseline screen shots after a UI change
The UI often changes. UI changes will break the smoke tests. To fix this, delete the offending baseline screen shots from the test/integration/screenshots-baseline folder and rerun the tests to generate new screen shots. 

Remember to check the screen shots after they have been generated.

Also, you can simply delete the test/integration/screenshots-baseline folder and rerun the smoke tests. During the repository commit process, make sure that only the screen shots you expect to have changed appear for commit.
