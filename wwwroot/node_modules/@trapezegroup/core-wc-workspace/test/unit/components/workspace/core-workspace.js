/* global describe, beforeAll, afterAll, expect, it */
/* Jasmine will be loaded by the test framework. No need to import it. */
import '/node_modules/jquery/dist/jquery.min.js';
import { mockSignalR, cleanUp } from '/node_modules/@trapezegroup/core-wc-mixins/test/mock/serverEventsListener.js';
import '../../../../src/components/workspace/core-workspace.js';

import '../../../../src/components/workspace/core-workspace-header.js';
import '../../../../src/components/workspace/core-workspace-footer.js';
import '../../../../src/components/workspace/core-workspace-content.js';

const container = document.createElement('div');
container.innerHTML = `
<core-workspace>
    <div slot="logo">Logo</div>
    <div slot="productName">Trapeze group</div>
    <div slot="navLinks">
        <a class="item" routerLink="/getting-started" routerLinkActive="activeMenu">Getting Started</a> 
    </div>
    <div slot="navAction">
        <button>NavAction</button>
    </div>
    <div slot="footer">Default footer</div>
</core-workspace>`;

const coreWorkspace = container.querySelector('core-workspace');

describe('Testing core workspace component', () => {
    beforeAll(() => {
        mockSignalR();
        document.body.appendChild(container);
    });

    afterAll(() => {
        cleanUp();
        document.body.removeChild(container);
    });

    it('Testing whether the workspace components are rendered correctly', () => {
        expect(coreWorkspace.innerHTML).toContain('Logo');
        expect(coreWorkspace.innerHTML).toContain('Trapeze group');
        expect(coreWorkspace.innerHTML).toContain('Getting Started');
    });

    it('Testing whether the default footer is displayed', () => {
        expect(coreWorkspace.innerHTML).toContain('Default footer');
    });

    it('Test whether all the slots are available in the workspace component', () => {
        expect(coreWorkspace.shadowRoot.querySelector('[slot="logo"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="productName"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="notifications"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="navLinks"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="navAction"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="searchBar"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="userProfile"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="content"]')).toBeTruthy();
        expect(coreWorkspace.shadowRoot.querySelector('[slot="footer"]')).toBeTruthy();
    });
});
