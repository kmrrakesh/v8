function _typeof2(obj){if("function"===typeof Symbol&&"symbol"===typeof Symbol.iterator){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}function _typeof(obj){if("function"===typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var _typeof$1={default:_typeof};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0/* retry */,configurable:!0,writable:!0})}else{obj[key]=value}return obj}var defineProperty={default:_defineProperty};function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);if("function"===typeof Object.getOwnPropertySymbols){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}var objectSpread={default:_objectSpread};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var classCallCheck={default:_classCallCheck};function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1/* no retry */;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var createClass={default:_createClass};function _assertThisInitialized(self){if(void 0===self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}var assertThisInitialized={default:_assertThisInitialized};function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"===typeof call)){return call}return _assertThisInitialized(self)}var possibleConstructorReturn={default:_possibleConstructorReturn};function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var getPrototypeOf={default:_getPrototypeOf};function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var setPrototypeOf={default:_setPrototypeOf};function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)_setPrototypeOf(subClass,superClass)}var inherits={default:_inherits};function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var arrayWithoutHoles={default:_arrayWithoutHoles};function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}var iterableToArray={default:_iterableToArray};function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var nonIterableSpread={default:_nonIterableSpread};function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}var toConsumableArray={default:_toConsumableArray};function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var arrayWithHoles={default:_arrayWithHoles};function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr))){return}var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=!0){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=!0;_e=err}finally{try{if(!_n&&null!=_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}var iterableToArrayLimit={default:_iterableToArrayLimit};function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var nonIterableRest={default:_nonIterableRest};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}var slicedToArray={default:_slicedToArray},consoleLogger={type:"logger",log:function log(args){this.output("log",args)},warn:function warn(args){this.output("warn",args)},error:function error(args){this.output("error",args)},output:function output(type,args){var _console;/* eslint no-console: 0 */if(console&&console[type])(_console=console)[type].apply(_console,_toConsumableArray(args))}},Logger=/*#__PURE__*/function(){function Logger(concreteLogger){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,Logger);this.init(concreteLogger,options)}_createClass(Logger,[{key:"init",value:function init(concreteLogger){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.prefix=options.prefix||"i18next:";this.logger=concreteLogger||consoleLogger;this.options=options;this.debug=options.debug}},{key:"setDebug",value:function setDebug(bool){this.debug=bool}},{key:"log",value:function log(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return this.forward(args,"log","",!0)}},{key:"warn",value:function warn(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return this.forward(args,"warn","",!0)}},{key:"error",value:function error(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}return this.forward(args,"error","")}},{key:"deprecate",value:function deprecate(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}return this.forward(args,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function forward(args,lvl,prefix,debugOnly){if(debugOnly&&!this.debug)return null;if("string"===typeof args[0])args[0]="".concat(prefix).concat(this.prefix," ").concat(args[0]);return this.logger[lvl](args)}},{key:"create",value:function create(moduleName){return new Logger(this.logger,_objectSpread({},{prefix:"".concat(this.prefix,":").concat(moduleName,":")},this.options))}}]);return Logger}(),baseLogger=new Logger,EventEmitter=/*#__PURE__*/function(){function EventEmitter(){_classCallCheck(this,EventEmitter);this.observers={}}_createClass(EventEmitter,[{key:"on",value:function on(events,listener){var _this=this;events.split(" ").forEach(function(event){_this.observers[event]=_this.observers[event]||[];_this.observers[event].push(listener)});return this}},{key:"off",value:function off(event,listener){if(!this.observers[event])return;if(!listener){delete this.observers[event];return}this.observers[event]=this.observers[event].filter(function(l){return l!==listener})}},{key:"emit",value:function emit(event){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(this.observers[event]){var cloned=[].concat(this.observers[event]);cloned.forEach(function(observer){observer.apply(void 0,args)})}if(this.observers["*"]){var _cloned=[].concat(this.observers["*"]);_cloned.forEach(function(observer){observer.apply(observer,[event].concat(args))})}}}]);return EventEmitter}();// http://lea.verou.me/2016/12/resolve-promises-externally-with-this-one-weird-trick/
function defer(){var res,rej,promise=new Promise(function(resolve,reject){res=resolve;rej=reject});promise.resolve=res;promise.reject=rej;return promise}function makeString(object){if(null==object)return"";/* eslint prefer-template: 0 */return""+object}function copy(a,s,t){a.forEach(function(m){if(s[m])t[m]=s[m]})}function getLastOfPath(object,path,Empty){function cleanKey(key){return key&&-1<key.indexOf("###")?key.replace(/###/g,"."):key}function canNotTraverseDeeper(){return!object||"string"===typeof object}var stack="string"!==typeof path?[].concat(path):path.split(".");while(1<stack.length){if(canNotTraverseDeeper())return{};var key=cleanKey(stack.shift());if(!object[key]&&Empty)object[key]=new Empty;object=object[key]}if(canNotTraverseDeeper())return{};return{obj:object,k:cleanKey(stack.shift())}}function setPath(object,path,newValue){var _getLastOfPath=getLastOfPath(object,path,Object),obj=_getLastOfPath.obj,k=_getLastOfPath.k;obj[k]=newValue}function pushPath(object,path,newValue,concat){var _getLastOfPath2=getLastOfPath(object,path,Object),obj=_getLastOfPath2.obj,k=_getLastOfPath2.k;obj[k]=obj[k]||[];if(concat)obj[k]=obj[k].concat(newValue);if(!concat)obj[k].push(newValue)}function getPath(object,path){var _getLastOfPath3=getLastOfPath(object,path),obj=_getLastOfPath3.obj,k=_getLastOfPath3.k;if(!obj)return void 0;return obj[k]}function getPathWithDefaults(data,defaultData,key){var value=getPath(data,key);if(value!==void 0){return value}// Fallback to default values
return getPath(defaultData,key)}function deepExtend(target,source,overwrite){/* eslint no-restricted-syntax: 0 */for(var prop in source){if(prop in target){// If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch
if("string"===typeof target[prop]||target[prop]instanceof String||"string"===typeof source[prop]||source[prop]instanceof String){if(overwrite)target[prop]=source[prop]}else{deepExtend(target[prop],source[prop],overwrite)}}else{target[prop]=source[prop]}}return target}function regexEscape(str){/* eslint no-useless-escape: 0 */return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}/* eslint-disable */var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};/* eslint-enable */function escape(data){if("string"===typeof data){return data.replace(/[&<>"'\/]/g,function(s){return _entityMap[s]})}return data}var ResourceStore=/*#__PURE__*/function(_EventEmitter){_inherits(ResourceStore,_EventEmitter);function ResourceStore(data){var _this,options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};_classCallCheck(this,ResourceStore);_this=_possibleConstructorReturn(this,_getPrototypeOf(ResourceStore).call(this));EventEmitter.call(_assertThisInitialized(_this));// <=IE10 fix (unable to call parent constructor)
_this.data=data||{};_this.options=options;if(_this.options.keySeparator===void 0){_this.options.keySeparator="."}return _this}_createClass(ResourceStore,[{key:"addNamespaces",value:function addNamespaces(ns){if(0>this.options.ns.indexOf(ns)){this.options.ns.push(ns)}}},{key:"removeNamespaces",value:function removeNamespaces(ns){var index=this.options.ns.indexOf(ns);if(-1<index){this.options.ns.splice(index,1)}}},{key:"getResource",value:function getResource(lng,ns,key){var options=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},keySeparator=options.keySeparator!==void 0?options.keySeparator:this.options.keySeparator,path=[lng,ns];if(key&&"string"!==typeof key)path=path.concat(key);if(key&&"string"===typeof key)path=path.concat(keySeparator?key.split(keySeparator):key);if(-1<lng.indexOf(".")){path=lng.split(".")}return getPath(this.data,path)}},{key:"addResource",value:function addResource(lng,ns,key,value){var options=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{silent:!1},keySeparator=this.options.keySeparator;if(keySeparator===void 0)keySeparator=".";var path=[lng,ns];if(key)path=path.concat(keySeparator?key.split(keySeparator):key);if(-1<lng.indexOf(".")){path=lng.split(".");value=ns;ns=path[1]}this.addNamespaces(ns);setPath(this.data,path,value);if(!options.silent)this.emit("added",lng,ns,key,value)}},{key:"addResources",value:function addResources(lng,ns,resources){var options=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{silent:!1};/* eslint no-restricted-syntax: 0 */for(var m in resources){if("string"===typeof resources[m]||"[object Array]"===Object.prototype.toString.apply(resources[m]))this.addResource(lng,ns,m,resources[m],{silent:!0})}if(!options.silent)this.emit("added",lng,ns,resources)}},{key:"addResourceBundle",value:function addResourceBundle(lng,ns,resources,deep,overwrite){var options=5<arguments.length&&arguments[5]!==void 0?arguments[5]:{silent:!1},path=[lng,ns];if(-1<lng.indexOf(".")){path=lng.split(".");deep=resources;resources=ns;ns=path[1]}this.addNamespaces(ns);var pack=getPath(this.data,path)||{};if(deep){deepExtend(pack,resources,overwrite)}else{pack=_objectSpread({},pack,resources)}setPath(this.data,path,pack);if(!options.silent)this.emit("added",lng,ns,resources)}},{key:"removeResourceBundle",value:function removeResourceBundle(lng,ns){if(this.hasResourceBundle(lng,ns)){delete this.data[lng][ns]}this.removeNamespaces(ns);this.emit("removed",lng,ns)}},{key:"hasResourceBundle",value:function hasResourceBundle(lng,ns){return this.getResource(lng,ns)!==void 0}},{key:"getResourceBundle",value:function getResourceBundle(lng,ns){if(!ns)ns=this.options.defaultNS;// COMPATIBILITY: remove extend in v2.1.0
if("v1"===this.options.compatibilityAPI)return _objectSpread({},{},this.getResource(lng,ns));return this.getResource(lng,ns)}},{key:"getDataByLanguage",value:function getDataByLanguage(lng){return this.data[lng]}},{key:"toJSON",value:function toJSON(){return this.data}}]);return ResourceStore}(EventEmitter),postProcessor={processors:{},addPostProcessor:function addPostProcessor(module){this.processors[module.name]=module},handle:function handle(processors,value,key,options,translator){var _this=this;processors.forEach(function(processor){if(_this.processors[processor])value=_this.processors[processor].process(value,key,options,translator)});return value}},checkedLoadedFor={},Translator=/*#__PURE__*/function(_EventEmitter){_inherits(Translator,_EventEmitter);function Translator(services){var _this,options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,Translator);_this=_possibleConstructorReturn(this,_getPrototypeOf(Translator).call(this));EventEmitter.call(_assertThisInitialized(_this));// <=IE10 fix (unable to call parent constructor)
copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],services,_assertThisInitialized(_this));_this.options=options;if(_this.options.keySeparator===void 0){_this.options.keySeparator="."}_this.logger=baseLogger.create("translator");return _this}_createClass(Translator,[{key:"changeLanguage",value:function changeLanguage(lng){if(lng)this.language=lng}},{key:"exists",value:function exists(key){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},resolved=this.resolve(key,options);return resolved&&resolved.res!==void 0}},{key:"extractFromKey",value:function extractFromKey(key,options){var nsSeparator=options.nsSeparator||this.options.nsSeparator;if(nsSeparator===void 0)nsSeparator=":";var keySeparator=options.keySeparator!==void 0?options.keySeparator:this.options.keySeparator,namespaces=options.ns||this.options.defaultNS;if(nsSeparator&&-1<key.indexOf(nsSeparator)){var parts=key.split(nsSeparator);if(nsSeparator!==keySeparator||nsSeparator===keySeparator&&-1<this.options.ns.indexOf(parts[0]))namespaces=parts.shift();key=parts.join(keySeparator)}if("string"===typeof namespaces)namespaces=[namespaces];return{key:key,namespaces:namespaces}}},{key:"translate",value:function translate(keys,options){var _this2=this;if("object"!==_typeof(options)&&this.options.overloadTranslationOptionHandler){/* eslint prefer-rest-params: 0 */options=this.options.overloadTranslationOptionHandler(arguments)}if(!options)options={};// non valid keys handling
if(keys===void 0||null===keys)return"";if(!Array.isArray(keys))keys=[keys+""];// separators
var keySeparator=options.keySeparator!==void 0?options.keySeparator:this.options.keySeparator,_this$extractFromKey=this.extractFromKey(keys[keys.length-1],options),key=_this$extractFromKey.key,namespaces=_this$extractFromKey.namespaces,namespace=namespaces[namespaces.length-1],lng=options.lng||this.language,appendNamespaceToCIMode=options.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;// get namespace(s)
if(lng&&"cimode"===lng.toLowerCase()){if(appendNamespaceToCIMode){var nsSeparator=options.nsSeparator||this.options.nsSeparator;return namespace+nsSeparator+key}return key}// resolve from store
var resolved=this.resolve(keys,options),res=resolved&&resolved.res,resUsedKey=resolved&&resolved.usedKey||key,resExactUsedKey=resolved&&resolved.exactUsedKey||key,resType=Object.prototype.toString.apply(res),noObject=["[object Number]","[object Function]","[object RegExp]"],joinArrays=options.joinArrays!==void 0?options.joinArrays:this.options.joinArrays,handleAsObjectInI18nFormat=!this.i18nFormat||this.i18nFormat.handleAsObject,handleAsObject="string"!==typeof res&&"boolean"!==typeof res&&"number"!==typeof res;if(handleAsObjectInI18nFormat&&res&&handleAsObject&&0>noObject.indexOf(resType)&&!("string"===typeof joinArrays&&"[object Array]"===resType)){if(!options.returnObjects&&!this.options.returnObjects){this.logger.warn("accessing an object - but returnObjects options is not enabled!");return this.options.returnedObjectHandler?this.options.returnedObjectHandler(resUsedKey,res,options):"key '".concat(key," (").concat(this.language,")' returned an object instead of string.")}// if we got a separator we loop over children - else we just return object as is
// as having it set to false means no hierarchy so no lookup for nested values
if(keySeparator){var resTypeIsArray="[object Array]"===resType,copy$$1=resTypeIsArray?[]:{},newKeyToUse=resTypeIsArray?resExactUsedKey:resUsedKey;for(var m in res){if(Object.prototype.hasOwnProperty.call(res,m)){var deepKey="".concat(newKeyToUse).concat(keySeparator).concat(m);copy$$1[m]=this.translate(deepKey,_objectSpread({},options,{joinArrays:!1,ns:namespaces}));if(copy$$1[m]===deepKey)copy$$1[m]=res[m];// if nothing found use orginal value as fallback
}}res=copy$$1}}else if(handleAsObjectInI18nFormat&&"string"===typeof joinArrays&&"[object Array]"===resType){// array special treatment
res=res.join(joinArrays);if(res)res=this.extendTranslation(res,keys,options)}else{// string, empty or null
var usedDefault=!1,usedKey=!1;// fallback value
if(!this.isValidLookup(res)&&options.defaultValue!==void 0){usedDefault=!0;if(options.count!==void 0){var suffix=this.pluralResolver.getSuffix(lng,options.count);res=options["defaultValue".concat(suffix)]}if(!res)res=options.defaultValue}if(!this.isValidLookup(res)){usedKey=!0;res=key}// save missing
var updateMissing=options.defaultValue&&options.defaultValue!==res&&this.options.updateMissing;if(usedKey||usedDefault||updateMissing){this.logger.log(updateMissing?"updateKey":"missingKey",lng,namespace,key,updateMissing?options.defaultValue:res);var lngs=[],fallbackLngs=this.languageUtils.getFallbackCodes(this.options.fallbackLng,options.lng||this.language);if("fallback"===this.options.saveMissingTo&&fallbackLngs&&fallbackLngs[0]){for(var i=0;i<fallbackLngs.length;i++){lngs.push(fallbackLngs[i])}}else if("all"===this.options.saveMissingTo){lngs=this.languageUtils.toResolveHierarchy(options.lng||this.language)}else{lngs.push(options.lng||this.language)}var send=function send(l,k){if(_this2.options.missingKeyHandler){_this2.options.missingKeyHandler(l,namespace,k,updateMissing?options.defaultValue:res,updateMissing,options)}else if(_this2.backendConnector&&_this2.backendConnector.saveMissing){_this2.backendConnector.saveMissing(l,namespace,k,updateMissing?options.defaultValue:res,updateMissing,options)}_this2.emit("missingKey",l,namespace,k,res)};if(this.options.saveMissing){var needsPluralHandling=options.count!==void 0&&"string"!==typeof options.count;if(this.options.saveMissingPlurals&&needsPluralHandling){lngs.forEach(function(l){var plurals=_this2.pluralResolver.getPluralFormsOfKey(l,key);plurals.forEach(function(p){return send([l],p)})})}else{send(lngs,key)}}}// extend
res=this.extendTranslation(res,keys,options,resolved);// append namespace if still key
if(usedKey&&res===key&&this.options.appendNamespaceToMissingKey)res="".concat(namespace,":").concat(key);// parseMissingKeyHandler
if(usedKey&&this.options.parseMissingKeyHandler)res=this.options.parseMissingKeyHandler(res)}// return
return res}},{key:"extendTranslation",value:function extendTranslation(res,key,options,resolved){var _this3=this;if(this.i18nFormat&&this.i18nFormat.parse){res=this.i18nFormat.parse(res,options,resolved.usedLng,resolved.usedNS,resolved.usedKey,{resolved:resolved})}else if(!options.skipInterpolation){// i18next.parsing
if(options.interpolation)this.interpolator.init(_objectSpread({},options,{interpolation:_objectSpread({},this.options.interpolation,options.interpolation)}));// interpolate
var data=options.replace&&"string"!==typeof options.replace?options.replace:options;if(this.options.interpolation.defaultVariables)data=_objectSpread({},this.options.interpolation.defaultVariables,data);res=this.interpolator.interpolate(res,data,options.lng||this.language,options);// nesting
if(!1!==options.nest)res=this.interpolator.nest(res,function(){return _this3.translate.apply(_this3,arguments)},options);if(options.interpolation)this.interpolator.reset()}// post process
var postProcess=options.postProcess||this.options.postProcess,postProcessorNames="string"===typeof postProcess?[postProcess]:postProcess;if(res!==void 0&&null!==res&&postProcessorNames&&postProcessorNames.length&&!1!==options.applyPostProcessor){res=postProcessor.handle(postProcessorNames,res,key,this.options&&this.options.postProcessPassResolved?_objectSpread({i18nResolved:resolved},options):options,this)}return res}},{key:"resolve",value:function resolve(keys){var _this4=this,options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},found,usedKey,exactUsedKey,usedLng,usedNS;if("string"===typeof keys)keys=[keys];// forEach possible key
keys.forEach(function(k){if(_this4.isValidLookup(found))return;var extracted=_this4.extractFromKey(k,options),key=extracted.key;usedKey=key;var namespaces=extracted.namespaces;if(_this4.options.fallbackNS)namespaces=namespaces.concat(_this4.options.fallbackNS);var needsPluralHandling=options.count!==void 0&&"string"!==typeof options.count,needsContextHandling=options.context!==void 0&&"string"===typeof options.context&&""!==options.context,codes=options.lngs?options.lngs:_this4.languageUtils.toResolveHierarchy(options.lng||_this4.language,options.fallbackLng);namespaces.forEach(function(ns){if(_this4.isValidLookup(found))return;usedNS=ns;if(!checkedLoadedFor["".concat(codes[0],"-").concat(ns)]&&_this4.utils&&_this4.utils.hasLoadedNamespace&&!_this4.utils.hasLoadedNamespace(usedNS)){checkedLoadedFor["".concat(codes[0],"-").concat(ns)]=!0;_this4.logger.warn("key \"".concat(usedKey,"\" for namespace \"").concat(usedNS,"\" for languages \"").concat(codes.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}codes.forEach(function(code){if(_this4.isValidLookup(found))return;usedLng=code;var finalKey=key,finalKeys=[finalKey];if(_this4.i18nFormat&&_this4.i18nFormat.addLookupKeys){_this4.i18nFormat.addLookupKeys(finalKeys,key,code,ns,options)}else{var pluralSuffix;if(needsPluralHandling)pluralSuffix=_this4.pluralResolver.getSuffix(code,options.count);// fallback for plural if context not found
if(needsPluralHandling&&needsContextHandling)finalKeys.push(finalKey+pluralSuffix);// get key for context if needed
if(needsContextHandling)finalKeys.push(finalKey+="".concat(_this4.options.contextSeparator).concat(options.context));// get key for plural if needed
if(needsPluralHandling)finalKeys.push(finalKey+=pluralSuffix)}// iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only
var possibleKey;/* eslint no-cond-assign: 0 */while(possibleKey=finalKeys.pop()){if(!_this4.isValidLookup(found)){exactUsedKey=possibleKey;found=_this4.getResource(code,ns,possibleKey,options)}}})})});return{res:found,usedKey:usedKey,exactUsedKey:exactUsedKey,usedLng:usedLng,usedNS:usedNS}}},{key:"isValidLookup",value:function isValidLookup(res){return res!==void 0&&!(!this.options.returnNull&&null===res)&&!(!this.options.returnEmptyString&&""===res)}},{key:"getResource",value:function getResource(code,ns,key){var options=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};if(this.i18nFormat&&this.i18nFormat.getResource)return this.i18nFormat.getResource(code,ns,key,options);return this.resourceStore.getResource(code,ns,key,options)}}]);return Translator}(EventEmitter);function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}var LanguageUtil=/*#__PURE__*/function(){function LanguageUtil(options){_classCallCheck(this,LanguageUtil);this.options=options;this.whitelist=this.options.whitelist||!1;this.logger=baseLogger.create("languageUtils")}_createClass(LanguageUtil,[{key:"getScriptPartFromCode",value:function getScriptPartFromCode(code){if(!code||0>code.indexOf("-"))return null;var p=code.split("-");if(2===p.length)return null;p.pop();return this.formatLanguageCode(p.join("-"))}},{key:"getLanguagePartFromCode",value:function getLanguagePartFromCode(code){if(!code||0>code.indexOf("-"))return code;var p=code.split("-");return this.formatLanguageCode(p[0])}},{key:"formatLanguageCode",value:function formatLanguageCode(code){// http://www.iana.org/assignments/language-tags/language-tags.xhtml
if("string"===typeof code&&-1<code.indexOf("-")){var specialCases=["hans","hant","latn","cyrl","cans","mong","arab"],p=code.split("-");if(this.options.lowerCaseLng){p=p.map(function(part){return part.toLowerCase()})}else if(2===p.length){p[0]=p[0].toLowerCase();p[1]=p[1].toUpperCase();if(-1<specialCases.indexOf(p[1].toLowerCase()))p[1]=capitalize(p[1].toLowerCase())}else if(3===p.length){p[0]=p[0].toLowerCase();// if lenght 2 guess it's a country
if(2===p[1].length)p[1]=p[1].toUpperCase();if("sgn"!==p[0]&&2===p[2].length)p[2]=p[2].toUpperCase();if(-1<specialCases.indexOf(p[1].toLowerCase()))p[1]=capitalize(p[1].toLowerCase());if(-1<specialCases.indexOf(p[2].toLowerCase()))p[2]=capitalize(p[2].toLowerCase())}return p.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?code.toLowerCase():code}},{key:"isWhitelisted",value:function isWhitelisted(code){if("languageOnly"===this.options.load||this.options.nonExplicitWhitelist){code=this.getLanguagePartFromCode(code)}return!this.whitelist||!this.whitelist.length||-1<this.whitelist.indexOf(code)}},{key:"getFallbackCodes",value:function getFallbackCodes(fallbacks,code){if(!fallbacks)return[];if("string"===typeof fallbacks)fallbacks=[fallbacks];if("[object Array]"===Object.prototype.toString.apply(fallbacks))return fallbacks;if(!code)return fallbacks["default"]||[];// asume we have an object defining fallbacks
var found=fallbacks[code];if(!found)found=fallbacks[this.getScriptPartFromCode(code)];if(!found)found=fallbacks[this.formatLanguageCode(code)];if(!found)found=fallbacks["default"];return found||[]}},{key:"toResolveHierarchy",value:function toResolveHierarchy(code,fallbackCode){var _this=this,fallbackCodes=this.getFallbackCodes(fallbackCode||this.options.fallbackLng||[],code),codes=[],addCode=function addCode(c){if(!c)return;if(_this.isWhitelisted(c)){codes.push(c)}else{_this.logger.warn("rejecting non-whitelisted language code: ".concat(c))}};if("string"===typeof code&&-1<code.indexOf("-")){if("languageOnly"!==this.options.load)addCode(this.formatLanguageCode(code));if("languageOnly"!==this.options.load&&"currentOnly"!==this.options.load)addCode(this.getScriptPartFromCode(code));if("currentOnly"!==this.options.load)addCode(this.getLanguagePartFromCode(code))}else if("string"===typeof code){addCode(this.formatLanguageCode(code))}fallbackCodes.forEach(function(fc){if(0>codes.indexOf(fc))addCode(_this.formatLanguageCode(fc))});return codes}}]);return LanguageUtil}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function _(n){return+(1<n)},2:function _(n){return+(1!=n)},3:function _(n){return 0},4:function _(n){return+(1==n%10&&11!=n%100?0:2<=n%10&&4>=n%10&&(10>n%100||20<=n%100)?1:2)},5:function _(n){return+(0===n?0:1==n?1:2==n?2:3<=n%100&&10>=n%100?3:11<=n%100?4:5)},6:function _(n){return+(1==n?0:2<=n&&4>=n?1:2)},7:function _(n){return+(1==n?0:2<=n%10&&4>=n%10&&(10>n%100||20<=n%100)?1:2)},8:function _(n){return+(1==n?0:2==n?1:8!=n&&11!=n?2:3)},9:function _(n){return+(2<=n)},10:function _(n){return+(1==n?0:2==n?1:7>n?2:11>n?3:4)},11:function _(n){return+(1==n||11==n?0:2==n||12==n?1:2<n&&20>n?2:3)},12:function _(n){return+(1!=n%10||11==n%100)},13:function _(n){return+(0!==n)},14:function _(n){return+(1==n?0:2==n?1:3==n?2:3)},15:function _(n){return+(1==n%10&&11!=n%100?0:2<=n%10&&(10>n%100||20<=n%100)?1:2)},16:function _(n){return+(1==n%10&&11!=n%100?0:0!==n?1:2)},17:function _(n){return+(1==n||1==n%10?0:1)},18:function _(n){return+(0==n?0:1==n?1:2)},19:function _(n){return+(1==n?0:0===n||1<n%100&&11>n%100?1:10<n%100&&20>n%100?2:3)},20:function _(n){return+(1==n?0:0===n||0<n%100&&20>n%100?1:2)},21:function _(n){return+(1==n%100?1:2==n%100?2:3==n%100||4==n%100?3:0)},22:function _(n){return+(1===n?0:2===n?1:(0>n||10<n)&&0==n%10?2:3)}};/* eslint-disable */ /* eslint-enable */function createRules(){var rules={};sets.forEach(function(set){set.lngs.forEach(function(l){rules[l]={numbers:set.nr,plurals:_rulesPluralsTypes[set.fc]}})});return rules}var PluralResolver=/*#__PURE__*/function(){function PluralResolver(languageUtils){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,PluralResolver);this.languageUtils=languageUtils;this.options=options;this.logger=baseLogger.create("pluralResolver");this.rules=createRules()}_createClass(PluralResolver,[{key:"addRule",value:function addRule(lng,obj){this.rules[lng]=obj}},{key:"getRule",value:function getRule(code){return this.rules[code]||this.rules[this.languageUtils.getLanguagePartFromCode(code)]}},{key:"needsPlural",value:function needsPlural(code){var rule=this.getRule(code);return rule&&1<rule.numbers.length}},{key:"getPluralFormsOfKey",value:function getPluralFormsOfKey(code,key){var _this=this,ret=[],rule=this.getRule(code);if(!rule)return ret;rule.numbers.forEach(function(n){var suffix=_this.getSuffix(code,n);ret.push("".concat(key).concat(suffix))});return ret}},{key:"getSuffix",value:function getSuffix(code,count){var _this2=this,rule=this.getRule(code);if(rule){// if (rule.numbers.length === 1) return ''; // only singular
var idx=rule.noAbs?rule.plurals(count):rule.plurals(Math.abs(count)),suffix=rule.numbers[idx];// special treatment for lngs only having singular and plural
if(this.options.simplifyPluralSuffix&&2===rule.numbers.length&&1===rule.numbers[0]){if(2===suffix){suffix="plural"}else if(1===suffix){suffix=""}}var returnSuffix=function returnSuffix(){return _this2.options.prepend&&suffix.toString()?_this2.options.prepend+suffix.toString():suffix.toString()};// COMPATIBILITY JSON
// v1
if("v1"===this.options.compatibilityJSON){if(1===suffix)return"";if("number"===typeof suffix)return"_plural_".concat(suffix.toString());return returnSuffix()}else if(/* v2 */"v2"===this.options.compatibilityJSON){return returnSuffix()}else if(/* v3 - gettext index */this.options.simplifyPluralSuffix&&2===rule.numbers.length&&1===rule.numbers[0]){return returnSuffix()}return this.options.prepend&&idx.toString()?this.options.prepend+idx.toString():idx.toString()}this.logger.warn("no plural rule found for: ".concat(code));return""}}]);return PluralResolver}(),Interpolator=/*#__PURE__*/function(){function Interpolator(){var options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck(this,Interpolator);this.logger=baseLogger.create("interpolator");this.options=options;this.format=options.interpolation&&options.interpolation.format||function(value){return value};this.init(options)}/* eslint no-param-reassign: 0 */_createClass(Interpolator,[{key:"init",value:function init(){var options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(!options.interpolation)options.interpolation={escapeValue:!0};var iOpts=options.interpolation;this.escape=iOpts.escape!==void 0?iOpts.escape:escape;this.escapeValue=iOpts.escapeValue!==void 0?iOpts.escapeValue:!0;this.useRawValueToEscape=iOpts.useRawValueToEscape!==void 0?iOpts.useRawValueToEscape:!1;this.prefix=iOpts.prefix?regexEscape(iOpts.prefix):iOpts.prefixEscaped||"{{";this.suffix=iOpts.suffix?regexEscape(iOpts.suffix):iOpts.suffixEscaped||"}}";this.formatSeparator=iOpts.formatSeparator?iOpts.formatSeparator:iOpts.formatSeparator||",";this.unescapePrefix=iOpts.unescapeSuffix?"":iOpts.unescapePrefix||"-";this.unescapeSuffix=this.unescapePrefix?"":iOpts.unescapeSuffix||"";this.nestingPrefix=iOpts.nestingPrefix?regexEscape(iOpts.nestingPrefix):iOpts.nestingPrefixEscaped||regexEscape("$t(");this.nestingSuffix=iOpts.nestingSuffix?regexEscape(iOpts.nestingSuffix):iOpts.nestingSuffixEscaped||regexEscape(")");this.maxReplaces=iOpts.maxReplaces?iOpts.maxReplaces:1e3;// the regexp
this.resetRegExp()}},{key:"reset",value:function reset(){if(this.options)this.init(this.options)}},{key:"resetRegExp",value:function resetRegExp(){// the regexp
var regexpStr="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(regexpStr,"g");var regexpUnescapeStr="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(regexpUnescapeStr,"g");var nestingRegexpStr="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(nestingRegexpStr,"g")}},{key:"interpolate",value:function interpolate(str,data,lng,options){var _this=this,match,value,replaces,defaultData=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function regexSafe(val){return val.replace(/\$/g,"$$$$")}var handleFormat=function handleFormat(key){if(0>key.indexOf(_this.formatSeparator)){return getPathWithDefaults(data,defaultData,key)}var p=key.split(_this.formatSeparator),k=p.shift().trim(),f=p.join(_this.formatSeparator).trim();return _this.format(getPathWithDefaults(data,defaultData,k),f,lng)};this.resetRegExp();var missingInterpolationHandler=options&&options.missingInterpolationHandler||this.options.missingInterpolationHandler;replaces=0;// unescape if has unescapePrefix/Suffix
/* eslint no-cond-assign: 0 */while(match=this.regexpUnescape.exec(str)){value=handleFormat(match[1].trim());if(value===void 0){if("function"===typeof missingInterpolationHandler){var temp=missingInterpolationHandler(str,match,options);value="string"===typeof temp?temp:""}else{this.logger.warn("missed to pass in variable ".concat(match[1]," for interpolating ").concat(str));value=""}}else if("string"!==typeof value&&!this.useRawValueToEscape){value=makeString(value)}str=str.replace(match[0],regexSafe(value));this.regexpUnescape.lastIndex=0;replaces++;if(replaces>=this.maxReplaces){break}}replaces=0;// regular escape on demand
while(match=this.regexp.exec(str)){value=handleFormat(match[1].trim());if(value===void 0){if("function"===typeof missingInterpolationHandler){var _temp=missingInterpolationHandler(str,match,options);value="string"===typeof _temp?_temp:""}else{this.logger.warn("missed to pass in variable ".concat(match[1]," for interpolating ").concat(str));value=""}}else if("string"!==typeof value&&!this.useRawValueToEscape){value=makeString(value)}value=this.escapeValue?regexSafe(this.escape(value)):regexSafe(value);str=str.replace(match[0],value);this.regexp.lastIndex=0;replaces++;if(replaces>=this.maxReplaces){break}}return str}},{key:"nest",value:function nest(str,fc){var options=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},match,value,clonedOptions=_objectSpread({},options);clonedOptions.applyPostProcessor=!1;// avoid post processing on nested lookup
delete clonedOptions.defaultValue;// assert we do not get a endless loop on interpolating defaultValue again and again
// if value is something like "myKey": "lorem $(anotherKey, { "count": {{aValueInOptions}} })"
function handleHasOptions(key,inheritedOptions){if(0>key.indexOf(","))return key;var p=key.split(",");key=p.shift();var optionsString=p.join(",");optionsString=this.interpolate(optionsString,clonedOptions);optionsString=optionsString.replace(/'/g,"\"");try{clonedOptions=JSON.parse(optionsString);if(inheritedOptions)clonedOptions=_objectSpread({},inheritedOptions,clonedOptions)}catch(e){this.logger.error("failed parsing options string in nesting for key ".concat(key),e)}// assert we do not get a endless loop on interpolating defaultValue again and again
delete clonedOptions.defaultValue;return key}// regular escape on demand
while(match=this.nestingRegexp.exec(str)){value=fc(handleHasOptions.call(this,match[1].trim(),clonedOptions),clonedOptions);// is only the nesting key (key1 = '$(key2)') return the value without stringify
if(value&&match[0]===str&&"string"!==typeof value)return value;// no string to include or empty
if("string"!==typeof value)value=makeString(value);if(!value){this.logger.warn("missed to resolve ".concat(match[1]," for nesting ").concat(str));value=""}// Nested keys should not be escaped by default #854
// value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);
str=str.replace(match[0],value);this.regexp.lastIndex=0}return str}}]);return Interpolator}();function remove(arr,what){var found=arr.indexOf(what);while(-1!==found){arr.splice(found,1);found=arr.indexOf(what)}}var Connector=/*#__PURE__*/function(_EventEmitter){_inherits(Connector,_EventEmitter);function Connector(backend,store,services){var _this,options=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};_classCallCheck(this,Connector);_this=_possibleConstructorReturn(this,_getPrototypeOf(Connector).call(this));EventEmitter.call(_assertThisInitialized(_this));// <=IE10 fix (unable to call parent constructor)
_this.backend=backend;_this.store=store;_this.services=services;_this.languageUtils=services.languageUtils;_this.options=options;_this.logger=baseLogger.create("backendConnector");_this.state={};_this.queue=[];if(_this.backend&&_this.backend.init){_this.backend.init(services,options.backend,options)}return _this}_createClass(Connector,[{key:"queueLoad",value:function queueLoad(languages,namespaces,options,callback){var _this2=this,toLoad=[],pending=[],toLoadLanguages=[],toLoadNamespaces=[];// find what needs to be loaded
languages.forEach(function(lng){var hasAllNamespaces=!0;namespaces.forEach(function(ns){var name="".concat(lng,"|").concat(ns);if(!options.reload&&_this2.store.hasResourceBundle(lng,ns)){_this2.state[name]=2;// loaded
}else if(0>_this2.state[name]);else if(1===_this2.state[name]){if(0>pending.indexOf(name))pending.push(name)}else{_this2.state[name]=1;// pending
hasAllNamespaces=!1;if(0>pending.indexOf(name))pending.push(name);if(0>toLoad.indexOf(name))toLoad.push(name);if(0>toLoadNamespaces.indexOf(ns))toLoadNamespaces.push(ns)}});if(!hasAllNamespaces)toLoadLanguages.push(lng)});if(toLoad.length||pending.length){this.queue.push({pending:pending,loaded:{},errors:[],callback:callback})}return{toLoad:toLoad,pending:pending,toLoadLanguages:toLoadLanguages,toLoadNamespaces:toLoadNamespaces}}},{key:"loaded",value:function loaded(name,err,data){var _name$split=name.split("|"),_name$split2=_slicedToArray(_name$split,2),lng=_name$split2[0],ns=_name$split2[1];if(err)this.emit("failedLoading",lng,ns,err);if(data){this.store.addResourceBundle(lng,ns,data)}// set loaded
this.state[name]=err?-1:2;// consolidated loading done in this run - only emit once for a loaded namespace
var loaded={};// callback if ready
this.queue.forEach(function(q){pushPath(q.loaded,[lng],ns);remove(q.pending,name);if(err)q.errors.push(err);if(0===q.pending.length&&!q.done){// only do once per loaded -> this.emit('loaded', q.loaded);
Object.keys(q.loaded).forEach(function(l){if(!loaded[l])loaded[l]=[];if(q.loaded[l].length){q.loaded[l].forEach(function(ns){if(0>loaded[l].indexOf(ns))loaded[l].push(ns)})}});/* eslint no-param-reassign: 0 */q.done=!0;if(q.errors.length){q.callback(q.errors)}else{q.callback()}}});// emit consolidated loaded event
this.emit("loaded",loaded);// remove done load requests
this.queue=this.queue.filter(function(q){return!q.done})}},{key:"read",value:function read(lng,ns,fcName){var _this3=this,tried=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,wait=4<arguments.length&&arguments[4]!==void 0?arguments[4]:250,callback=5<arguments.length?arguments[5]:void 0;if(!lng.length)return callback(null,{});// noting to load
return this.backend[fcName](lng,ns,function(err,data){if(err&&data/* = retryFlag */&&5>tried){setTimeout(function(){_this3.read.call(_this3,lng,ns,fcName,tried+1,2*wait,callback)},wait);return}callback(err,data)})}/* eslint consistent-return: 0 */},{key:"prepareLoading",value:function prepareLoading(languages,namespaces){var _this4=this,options=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},callback=3<arguments.length?arguments[3]:void 0;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.");return callback&&callback()}if("string"===typeof languages)languages=this.languageUtils.toResolveHierarchy(languages);if("string"===typeof namespaces)namespaces=[namespaces];var toLoad=this.queueLoad(languages,namespaces,options,callback);if(!toLoad.toLoad.length){if(!toLoad.pending.length)callback();// nothing to load and no pendings...callback now
return null;// pendings will trigger callback
}toLoad.toLoad.forEach(function(name){_this4.loadOne(name)})}},{key:"load",value:function load(languages,namespaces,callback){this.prepareLoading(languages,namespaces,{},callback)}},{key:"reload",value:function reload(languages,namespaces,callback){this.prepareLoading(languages,namespaces,{reload:!0},callback)}},{key:"loadOne",value:function loadOne(name){var _this5=this,prefix=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"",_name$split3=name.split("|"),_name$split4=_slicedToArray(_name$split3,2),lng=_name$split4[0],ns=_name$split4[1];this.read(lng,ns,"read",null,null,function(err,data){if(err)_this5.logger.warn("".concat(prefix,"loading namespace ").concat(ns," for language ").concat(lng," failed"),err);if(!err&&data)_this5.logger.log("".concat(prefix,"loaded namespace ").concat(ns," for language ").concat(lng),data);_this5.loaded(name,err,data)})}},{key:"saveMissing",value:function saveMissing(languages,namespace,key,fallbackValue,isUpdate){var options=5<arguments.length&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(namespace)){this.logger.warn("did not save key \"".concat(key,"\" for namespace \"").concat(namespace,"\" as the namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(this.backend&&this.backend.create){this.backend.create(languages,namespace,key,fallbackValue,null/* unused callback */,_objectSpread({},options,{isUpdate:isUpdate}))}// write to store to avoid resending
if(!languages||!languages[0])return;this.store.addResource(languages[0],namespace,key,fallbackValue)}}]);return Connector}(EventEmitter);function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,// string or array of namespaces
whitelist:!1,// array with whitelisted languages
nonExplicitWhitelist:!1,load:"all",// | currentOnly | languageOnly
preload:!1,// array with preload languages
simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,// allow bundling certain languages that are not remotely fetched
saveMissing:!1,// enable to send missing values
updateMissing:!1,// enable to update default values if different from translated value (only useful on initial development, or when keeping code as source of truth)
saveMissingTo:"fallback",// 'current' || 'all'
saveMissingPlurals:!0,// will save all forms not only singular key
missingKeyHandler:!1,// function(lng, ns, key, fallbackValue) -> override if prefer on handling
missingInterpolationHandler:!1,// function(str, match)
postProcess:!1,// string or array of postProcessor names
postProcessPassResolved:!1,// pass resolved object into 'options.i18nResolved' for postprocessor
returnNull:!0,// allows null value as valid translation
returnEmptyString:!0,// allows empty string value as valid translation
returnObjects:!1,joinArrays:!1,// or string to join array
returnedObjectHandler:!1,// function(key, value, options) triggered if key returns object but returnObjects is set to false
parseMissingKeyHandler:!1,// function(key) parsed a key that was not found in t() before returning
appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function handle(args){var ret={};if("object"===_typeof(args[1]))ret=args[1];if("string"===typeof args[1])ret.defaultValue=args[1];if("string"===typeof args[2])ret.tDescription=args[2];if("object"===_typeof(args[2])||"object"===_typeof(args[3])){var options=args[3]||args[2];Object.keys(options).forEach(function(key){ret[key]=options[key]})}return ret},interpolation:{escapeValue:!0,format:function format(value,_format,lng){return value},prefix:"{{",suffix:"}}",formatSeparator:",",// prefixEscaped: '{{',
// suffixEscaped: '}}',
// unescapeSuffix: '',
unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",// nestingPrefixEscaped: '$t(',
// nestingSuffixEscaped: ')',
// defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data
maxReplaces:1e3// max replaces to prevent endless loop
}}}/* eslint no-param-reassign: 0 */function transformOptions(options){// create namespace object if namespace is passed in as string
if("string"===typeof options.ns)options.ns=[options.ns];if("string"===typeof options.fallbackLng)options.fallbackLng=[options.fallbackLng];if("string"===typeof options.fallbackNS)options.fallbackNS=[options.fallbackNS];// extend whitelist with cimode
if(options.whitelist&&0>options.whitelist.indexOf("cimode")){options.whitelist=options.whitelist.concat(["cimode"])}return options}function noop(){}var I18n=/*#__PURE__*/function(_EventEmitter){_inherits(I18n,_EventEmitter);function I18n(){var _this,options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},callback=1<arguments.length?arguments[1]:void 0;_classCallCheck(this,I18n);_this=_possibleConstructorReturn(this,_getPrototypeOf(I18n).call(this));EventEmitter.call(_assertThisInitialized(_this));// <=IE10 fix (unable to call parent constructor)
_this.options=transformOptions(options);_this.services={};_this.logger=baseLogger;_this.modules={external:[]};if(callback&&!_this.isInitialized&&!options.isClone){// https://github.com/i18next/i18next/issues/879
if(!_this.options.initImmediate){_this.init(options,callback);return _possibleConstructorReturn(_this,_assertThisInitialized(_this))}setTimeout(function(){_this.init(options,callback)},0)}return _this}_createClass(I18n,[{key:"init",value:function init(){var _this2=this,options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},callback=1<arguments.length?arguments[1]:void 0;if("function"===typeof options){callback=options;options={}}this.options=_objectSpread({},get(),this.options,transformOptions(options));this.format=this.options.interpolation.format;if(!callback)callback=noop;function createClassOnDemand(ClassOrObject){if(!ClassOrObject)return null;if("function"===typeof ClassOrObject)return new ClassOrObject;return ClassOrObject}// init services
if(!this.options.isClone){if(this.modules.logger){baseLogger.init(createClassOnDemand(this.modules.logger),this.options)}else{baseLogger.init(null,this.options)}var lu=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var s=this.services;s.logger=baseLogger;s.resourceStore=this.store;s.languageUtils=lu;s.pluralResolver=new PluralResolver(lu,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix});s.interpolator=new Interpolator(this.options);s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)};s.backendConnector=new Connector(createClassOnDemand(this.modules.backend),s.resourceStore,s,this.options);// pipe events from backendConnector
s.backendConnector.on("*",function(event){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}_this2.emit.apply(_this2,[event].concat(args))});if(this.modules.languageDetector){s.languageDetector=createClassOnDemand(this.modules.languageDetector);s.languageDetector.init(s,this.options.detection,this.options)}if(this.modules.i18nFormat){s.i18nFormat=createClassOnDemand(this.modules.i18nFormat);if(s.i18nFormat.init)s.i18nFormat.init(this)}this.translator=new Translator(this.services,this.options);// pipe events from translator
this.translator.on("*",function(event){for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}_this2.emit.apply(_this2,[event].concat(args))});this.modules.external.forEach(function(m){if(m.init)m.init(_this2)})}// append api
var storeApi=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];storeApi.forEach(function(fcName){_this2[fcName]=function(){var _this2$store;return(_this2$store=_this2.store)[fcName].apply(_this2$store,arguments)}});var deferred=defer(),load=function load(){_this2.changeLanguage(_this2.options.lng,function(err,t){_this2.isInitialized=!0;_this2.logger.log("initialized",_this2.options);_this2.emit("initialized",_this2.options);deferred.resolve(t);// not rejecting on err (as err is only a loading translation failed warning)
callback(err,t)})};if(this.options.resources||!this.options.initImmediate){load()}else{setTimeout(load,0)}return deferred}/* eslint consistent-return: 0 */},{key:"loadResources",value:function loadResources(language){var _this3=this,callback=1<arguments.length&&arguments[1]!==void 0?arguments[1]:noop,usedCallback=callback,usedLng="string"===typeof language?language:this.language;if("function"===typeof language)usedCallback=language;if(!this.options.resources||this.options.partialBundledLanguages){if(usedLng&&"cimode"===usedLng.toLowerCase())return usedCallback();// avoid loading resources for cimode
var toLoad=[],append=function append(lng){if(!lng)return;var lngs=_this3.services.languageUtils.toResolveHierarchy(lng);lngs.forEach(function(l){if(0>toLoad.indexOf(l))toLoad.push(l)})};if(!usedLng){// at least load fallbacks in this case
var fallbacks=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);fallbacks.forEach(function(l){return append(l)})}else{append(usedLng)}if(this.options.preload){this.options.preload.forEach(function(l){return append(l)})}this.services.backendConnector.load(toLoad,this.options.ns,usedCallback)}else{usedCallback(null)}}},{key:"reloadResources",value:function reloadResources(lngs,ns,callback){var deferred=defer();if(!lngs)lngs=this.languages;if(!ns)ns=this.options.ns;if(!callback)callback=noop;this.services.backendConnector.reload(lngs,ns,function(err){deferred.resolve();// not rejecting on err (as err is only a loading translation failed warning)
callback(err)});return deferred}},{key:"use",value:function use(module){if("backend"===module.type){this.modules.backend=module}if("logger"===module.type||module.log&&module.warn&&module.error){this.modules.logger=module}if("languageDetector"===module.type){this.modules.languageDetector=module}if("i18nFormat"===module.type){this.modules.i18nFormat=module}if("postProcessor"===module.type){postProcessor.addPostProcessor(module)}if("3rdParty"===module.type){this.modules.external.push(module)}return this}},{key:"changeLanguage",value:function changeLanguage(lng,callback){var _this4=this;this.isLanguageChangingTo=lng;var deferred=defer();this.emit("languageChanging",lng);var done=function done(err,l){if(l){_this4.language=l;_this4.languages=_this4.services.languageUtils.toResolveHierarchy(l);_this4.translator.changeLanguage(l);_this4.isLanguageChangingTo=void 0;_this4.emit("languageChanged",l);_this4.logger.log("languageChanged",l)}else{_this4.isLanguageChangingTo=void 0}deferred.resolve(function(){return _this4.t.apply(_this4,arguments)});if(callback)callback(err,function(){return _this4.t.apply(_this4,arguments)})},setLng=function setLng(l){if(l){if(!_this4.language){_this4.language=l;_this4.languages=_this4.services.languageUtils.toResolveHierarchy(l)}if(!_this4.translator.language)_this4.translator.changeLanguage(l);if(_this4.services.languageDetector)_this4.services.languageDetector.cacheUserLanguage(l)}_this4.loadResources(l,function(err){done(err,l)})};if(!lng&&this.services.languageDetector&&!this.services.languageDetector.async){setLng(this.services.languageDetector.detect())}else if(!lng&&this.services.languageDetector&&this.services.languageDetector.async){this.services.languageDetector.detect(setLng)}else{setLng(lng)}return deferred}},{key:"getFixedT",value:function getFixedT(lng,ns){var _this5=this,fixedT=function fixedT(key,opts){var options;if("object"!==_typeof(opts)){for(var _len3=arguments.length,rest=Array(2<_len3?_len3-2:0),_key3=2;_key3<_len3;_key3++){rest[_key3-2]=arguments[_key3]}options=_this5.options.overloadTranslationOptionHandler([key,opts].concat(rest))}else{options=_objectSpread({},opts)}options.lng=options.lng||fixedT.lng;options.lngs=options.lngs||fixedT.lngs;options.ns=options.ns||fixedT.ns;return _this5.t(key,options)};if("string"===typeof lng){fixedT.lng=lng}else{fixedT.lngs=lng}fixedT.ns=ns;return fixedT}},{key:"t",value:function t(){var _this$translator;return this.translator&&(_this$translator=this.translator).translate.apply(_this$translator,arguments)}},{key:"exists",value:function exists(){var _this$translator2;return this.translator&&(_this$translator2=this.translator).exists.apply(_this$translator2,arguments)}},{key:"setDefaultNamespace",value:function setDefaultNamespace(ns){this.options.defaultNS=ns}},{key:"hasLoadedNamespace",value:function hasLoadedNamespace(ns){var _this6=this;if(!this.isInitialized){this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages);return!1}if(!this.languages||!this.languages.length){this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages);return!1}var lng=this.languages[0],fallbackLng=this.options?this.options.fallbackLng:!1,lastLng=this.languages[this.languages.length-1];// we're in cimode so this shall pass
if("cimode"===lng.toLowerCase())return!0;var loadNotPending=function loadNotPending(l,n){var loadState=_this6.services.backendConnector.state["".concat(l,"|").concat(n)];return-1===loadState||2===loadState};// loaded -> SUCCESS
if(this.hasResourceBundle(lng,ns))return!0;// were not loading at all -> SEMI SUCCESS
if(!this.services.backendConnector.backend)return!0;// failed loading ns - but at least fallback is not pending -> SEMI SUCCESS
if(loadNotPending(lng,ns)&&(!fallbackLng||loadNotPending(lastLng,ns)))return!0;return!1}},{key:"loadNamespaces",value:function loadNamespaces(ns,callback){var _this7=this,deferred=defer();if(!this.options.ns){callback&&callback();return Promise.resolve()}if("string"===typeof ns)ns=[ns];ns.forEach(function(n){if(0>_this7.options.ns.indexOf(n))_this7.options.ns.push(n)});this.loadResources(function(err){deferred.resolve();if(callback)callback(err)});return deferred}},{key:"loadLanguages",value:function loadLanguages(lngs,callback){var deferred=defer();if("string"===typeof lngs)lngs=[lngs];var preloaded=this.options.preload||[],newLngs=lngs.filter(function(lng){return 0>preloaded.indexOf(lng)});// Exit early if all given languages are already preloaded
if(!newLngs.length){if(callback)callback();return Promise.resolve()}this.options.preload=preloaded.concat(newLngs);this.loadResources(function(err){deferred.resolve();if(callback)callback(err)});return deferred}},{key:"dir",value:function dir(lng){if(!lng)lng=this.languages&&0<this.languages.length?this.languages[0]:this.language;if(!lng)return"rtl";var rtlLngs=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return 0<=rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng))?"rtl":"ltr"}/* eslint class-methods-use-this: 0 */},{key:"createInstance",value:function createInstance(){var options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},callback=1<arguments.length?arguments[1]:void 0;return new I18n(options,callback)}},{key:"cloneInstance",value:function cloneInstance(){var _this8=this,options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},callback=1<arguments.length&&arguments[1]!==void 0?arguments[1]:noop,mergedOptions=_objectSpread({},this.options,options,{isClone:!0}),clone=new I18n(mergedOptions),membersToCopy=["store","services","language"];membersToCopy.forEach(function(m){clone[m]=_this8[m]});clone.translator=new Translator(clone.services,clone.options);clone.translator.on("*",function(event){for(var _len4=arguments.length,args=Array(1<_len4?_len4-1:0),_key4=1;_key4<_len4;_key4++){args[_key4-1]=arguments[_key4]}clone.emit.apply(clone,[event].concat(args))});clone.init(mergedOptions,callback);clone.translator.options=clone.options;// sync options
return clone}}]);return I18n}(EventEmitter),i18next=new I18n,i18next$1={default:i18next},arr=[],each=arr.forEach,slice=arr.slice;function defaults(obj){each.call(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj}function addQueryString(url,params){if(params&&"object"===_typeof(params)){var queryString="",e=encodeURIComponent;// Must encode data
for(var paramName in params){queryString+="&"+e(paramName)+"="+e(params[paramName])}if(!queryString){return url}url=url+(-1!==url.indexOf("?")?"&":"?")+queryString.slice(1)}return url}// https://gist.github.com/Xeoncross/7663273
function ajax(url,options,callback,data,cache){if(data&&"object"===_typeof(data)){if(!cache){data._t=new Date}// URL encoded form data must be in querystring format
data=addQueryString("",data).slice(1)}if(options.queryStringParams){url=addQueryString(url,options.queryStringParams)}try{var x;if(XMLHttpRequest){x=new XMLHttpRequest}else{x=new ActiveXObject("MSXML2.XMLHTTP.3.0")}x.open(data?"POST":"GET",url,1);if(!options.crossDomain){x.setRequestHeader("X-Requested-With","XMLHttpRequest")}x.withCredentials=!!options.withCredentials;if(data){x.setRequestHeader("Content-type","application/x-www-form-urlencoded")}if(x.overrideMimeType){x.overrideMimeType("application/json")}var h=options.customHeaders;h="function"===typeof h?h():h;if(h){for(var i in h){x.setRequestHeader(i,h[i])}}x.onreadystatechange=function(){3<x.readyState&&callback&&callback(x.responseText,x)};x.send(data)}catch(e){console&&console.log(e)}}function getDefaults(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function parsePayload(namespace,key,fallbackValue){return _defineProperty({},key,fallbackValue||"")},crossDomain:!1,ajax:ajax}}var Backend=/*#__PURE__*/function(){function Backend(services){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,Backend);this.init(services,options);this.type="backend"}_createClass(Backend,[{key:"init",value:function init(services){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=services;this.options=defaults(options,this.options||{},getDefaults())}},{key:"readMulti",value:function readMulti(languages,namespaces,callback){var loadPath=this.options.loadPath;if("function"===typeof this.options.loadPath){loadPath=this.options.loadPath(languages,namespaces)}var url=this.services.interpolator.interpolate(loadPath,{lng:languages.join("+"),ns:namespaces.join("+")});this.loadUrl(url,callback)}},{key:"read",value:function read(language,namespace,callback){var loadPath=this.options.loadPath;if("function"===typeof this.options.loadPath){loadPath=this.options.loadPath([language],[namespace])}var url=this.services.interpolator.interpolate(loadPath,{lng:language,ns:namespace});this.loadUrl(url,callback)}},{key:"loadUrl",value:function loadUrl(url,callback){var _this=this;this.options.ajax(url,this.options,function(data,xhr){if(500<=xhr.status&&600>xhr.status)return callback("failed loading "+url,!0);if(400<=xhr.status&&500>xhr.status)return callback("failed loading "+url,!1);var ret,err;try{ret=_this.options.parse(data,url)}catch(e){err="failed parsing "+url+" to json"}if(err)return callback(err,!1);callback(null,ret)})}},{key:"create",value:function create(languages,namespace,key,fallbackValue){var _this2=this;if("string"===typeof languages)languages=[languages];var payload=this.options.parsePayload(namespace,key,fallbackValue);languages.forEach(function(lng){var url=_this2.services.interpolator.interpolate(_this2.options.addPath,{lng:lng,ns:namespace});_this2.options.ajax(url,_this2.options,function(data,xhr){//const statusCode = xhr.status.toString();
// TODO: if statusCode === 4xx do log
},payload)})}}]);return Backend}();Backend.type="backend";var i18nextXHRBackend={default:Backend},arr$1=[],each$1=arr$1.forEach,slice$1=arr$1.slice;function defaults$1(obj){each$1.call(slice$1.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj}var cookie={create:function create(name,value,minutes,domain){var expires;if(minutes){var date=new Date;date.setTime(date.getTime()+1e3*(60*minutes));expires="; expires="+date.toGMTString()}else expires="";domain=domain?"domain="+domain+";":"";document.cookie=name+"="+value+expires+";"+domain+"path=/"},read:function read(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0,c;i<ca.length;i++){c=ca[i];while(" "===c.charAt(0)){c=c.substring(1,c.length)}if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},remove:function remove(name){this.create(name,"",-1)}},cookie$1={name:"cookie",lookup:function lookup(options){var found;if(options.lookupCookie&&"undefined"!==typeof document){var c=cookie.read(options.lookupCookie);if(c)found=c}return found},cacheUserLanguage:function cacheUserLanguage(lng,options){if(options.lookupCookie&&"undefined"!==typeof document){cookie.create(options.lookupCookie,lng,options.cookieMinutes,options.cookieDomain)}}},querystring={name:"querystring",lookup:function lookup(options){var found;if("undefined"!==typeof window){for(var query=window.location.search.substring(1),params=query.split("&"),i=0,pos;i<params.length;i++){pos=params[i].indexOf("=");if(0<pos){var key=params[i].substring(0,pos);if(key===options.lookupQuerystring){found=params[i].substring(pos+1)}}}}return found}},hasLocalStorageSupport;try{hasLocalStorageSupport="undefined"!==window&&null!==window.localStorage;var testKey="i18next.translate.boo";window.localStorage.setItem(testKey,"foo");window.localStorage.removeItem(testKey)}catch(e){hasLocalStorageSupport=!1}var localStorage={name:"localStorage",lookup:function lookup(options){var found;if(options.lookupLocalStorage&&hasLocalStorageSupport){var lng=window.localStorage.getItem(options.lookupLocalStorage);if(lng)found=lng}return found},cacheUserLanguage:function cacheUserLanguage(lng,options){if(options.lookupLocalStorage&&hasLocalStorageSupport){window.localStorage.setItem(options.lookupLocalStorage,lng)}}},navigator$1={name:"navigator",lookup:function lookup(options){var found=[];if("undefined"!==typeof navigator){if(navigator.languages){// chrome only; not an array, so can't use .push.apply instead of iterating
for(var i=0;i<navigator.languages.length;i++){found.push(navigator.languages[i])}}if(navigator.userLanguage){found.push(navigator.userLanguage)}if(navigator.language){found.push(navigator.language)}}return 0<found.length?found:void 0}},htmlTag={name:"htmlTag",lookup:function lookup(options){var found,htmlTag=options.htmlTag||("undefined"!==typeof document?document.documentElement:null);if(htmlTag&&"function"===typeof htmlTag.getAttribute){found=htmlTag.getAttribute("lang")}return found}},path={name:"path",lookup:function lookup(options){var found;if("undefined"!==typeof window){var language=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(language instanceof Array){if("number"===typeof options.lookupFromPathIndex){if("string"!==typeof language[options.lookupFromPathIndex]){return void 0}found=language[options.lookupFromPathIndex].replace("/","")}else{found=language[0].replace("/","")}}}return found}},subdomain={name:"subdomain",lookup:function lookup(options){var found;if("undefined"!==typeof window){var language=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);if(language instanceof Array){if("number"===typeof options.lookupFromSubdomainIndex){found=language[options.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".","")}else{found=language[0].replace("http://","").replace("https://","").replace(".","")}}}return found}};function getDefaults$1(){return{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",// cache user language
caches:["localStorage"],excludeCacheFor:["cimode"],//cookieMinutes: 10,
//cookieDomain: 'myDomain'
checkWhitelist:!0}}var Browser=/*#__PURE__*/function(){function Browser(services){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,Browser);this.type="languageDetector";this.detectors={};this.init(services,options)}_createClass(Browser,[{key:"init",value:function init(services){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i18nOptions=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.services=services;this.options=defaults$1(options,this.options||{},getDefaults$1());// backwards compatibility
if(this.options.lookupFromUrlIndex)this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex;this.i18nOptions=i18nOptions;this.addDetector(cookie$1);this.addDetector(querystring);this.addDetector(localStorage);this.addDetector(navigator$1);this.addDetector(htmlTag);this.addDetector(path);this.addDetector(subdomain)}},{key:"addDetector",value:function addDetector(detector){this.detectors[detector.name]=detector}},{key:"detect",value:function detect(detectionOrder){var _this=this;if(!detectionOrder)detectionOrder=this.options.order;var detected=[];detectionOrder.forEach(function(detectorName){if(_this.detectors[detectorName]){var lookup=_this.detectors[detectorName].lookup(_this.options);if(lookup&&"string"===typeof lookup)lookup=[lookup];if(lookup)detected=detected.concat(lookup)}});var found;detected.forEach(function(lng){if(found)return;var cleanedLng=_this.services.languageUtils.formatLanguageCode(lng);if(!_this.options.checkWhitelist||_this.services.languageUtils.isWhitelisted(cleanedLng))found=cleanedLng});if(!found){var fallbacks=this.i18nOptions.fallbackLng;if("string"===typeof fallbacks)fallbacks=[fallbacks];if(!fallbacks)fallbacks=[];if("[object Array]"===Object.prototype.toString.apply(fallbacks)){found=fallbacks[0]}else{found=fallbacks[0]||fallbacks["default"]&&fallbacks["default"][0]}}return found}},{key:"cacheUserLanguage",value:function cacheUserLanguage(lng,caches){var _this2=this;if(!caches)caches=this.options.caches;if(!caches)return;if(this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(lng))return;caches.forEach(function(cacheName){if(_this2.detectors[cacheName])_this2.detectors[cacheName].cacheUserLanguage(lng,_this2.options)})}}]);return Browser}();Browser.type="languageDetector";var i18nextBrowserLanguageDetector={default:Browser};const bundledImportMeta={...import.meta,url:new URL("./src/lib/i18n.js",import.meta.url).href};window.i18next=i18next;/**
                              * @typedef {object} Options
                              * @property {any} importMeta import.meta object that can be used to determine locale assets locations
                              * @property {string} namespace the namespace of the locale files to load. this will be the name of the file e.g. en.{namespace}.json
                              */ /**
                                  * Should be called once per set of locale string files that need loading.
                                  * 
                                  * @example
                                  * import { i18nInit } from '@trapezegroup/core-js-app/src/lib/i18n.js';
                                  * i18nInit({ importMeta: import.meta })
                                  * @param {Options} options optional options
                                  */function i18nInit(options){const opt=options||{importMeta:{url:""}};let base="/";if(opt.importMeta.url){const trapezeBasedPackage=opt.importMeta.url.match(/.*@trapezegroup\/.*?\//);if(trapezeBasedPackage){base=trapezeBasedPackage[0]}else{const monoRepoNestedPackage=-1===opt.importMeta.url.indexOf("/node_modules/")&&opt.importMeta.url.match(/.*\/(?=src\/)/i);if(monoRepoNestedPackage){base=monoRepoNestedPackage[0]}}}const i18nOptions={debug:!0,backend:{// Not documented but this loadPath can also be a function if needed
loadPath:`${base}assets/locales/{{lng}}.{{ns}}.json`,crossDomain:!0,withCredentials:!0},fallbackLng:"en",// Call for resources right away so that we load right namespace with concurrent requests
initImmediate:!1};if(i18next.options.ns&&i18next.options.ns.length){if(options.namespace){i18next.options.backend.loadPath=`${base}assets/locales/{{lng}}.{{ns}}.json`;return i18next.loadNamespaces(options.namespace)}else{return Promise.resolve()}}if(options.namespace){i18nOptions.ns=options.namespace}return(// @ts-ignore
i18next// @ts-ignore
.use(Backend).use(Browser).init(i18nOptions))}var i18n={i18nInit:i18nInit},index={i18nInit:i18nInit};export{arrayWithHoles as $arrayWithHoles,_arrayWithHoles as $arrayWithHolesDefault,arrayWithoutHoles as $arrayWithoutHoles,_arrayWithoutHoles as $arrayWithoutHolesDefault,assertThisInitialized as $assertThisInitialized,_assertThisInitialized as $assertThisInitializedDefault,classCallCheck as $classCallCheck,_classCallCheck as $classCallCheckDefault,createClass as $createClass,_createClass as $createClassDefault,defineProperty as $defineProperty,_defineProperty as $definePropertyDefault,getPrototypeOf as $getPrototypeOf,_getPrototypeOf as $getPrototypeOfDefault,i18n as $i18n,i18next$1 as $i18next,i18nextBrowserLanguageDetector as $i18nextBrowserLanguageDetector,Browser as $i18nextBrowserLanguageDetectorDefault,i18next as $i18nextDefault,i18nextXHRBackend as $i18nextXHRBackend,Backend as $i18nextXHRBackendDefault,index as $index,inherits as $inherits,_inherits as $inheritsDefault,iterableToArray as $iterableToArray,_iterableToArray as $iterableToArrayDefault,iterableToArrayLimit as $iterableToArrayLimit,_iterableToArrayLimit as $iterableToArrayLimitDefault,nonIterableRest as $nonIterableRest,_nonIterableRest as $nonIterableRestDefault,nonIterableSpread as $nonIterableSpread,_nonIterableSpread as $nonIterableSpreadDefault,objectSpread as $objectSpread,_objectSpread as $objectSpreadDefault,possibleConstructorReturn as $possibleConstructorReturn,_possibleConstructorReturn as $possibleConstructorReturnDefault,setPrototypeOf as $setPrototypeOf,_setPrototypeOf as $setPrototypeOfDefault,slicedToArray as $slicedToArray,_slicedToArray as $slicedToArrayDefault,toConsumableArray as $toConsumableArray,_toConsumableArray as $toConsumableArrayDefault,_typeof$1 as $typeof,_typeof as $typeofDefault,i18nInit,i18nInit as i18nInit$1};