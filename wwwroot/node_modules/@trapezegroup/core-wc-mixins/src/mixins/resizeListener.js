import { removeResizeListener, addResizeListener } from '../lib/common/windowResize.js';

// @ts-check

/** @param {{ new (): HTMLElement; new (): HTMLElement; prototype: HTMLElement; }} baseClass */
export const resizeListener = baseClass =>
    class extends baseClass {
        /** @inheritdoc */
        constructor() {
            super();

            addResizeListener(this);
        }

        /** @inheritdoc */
        disconnectedCallback() {
            removeResizeListener(this);

            super.disconnectedCallback && super.disconnectedCallback();
        }

        /** Tidy up for garbage collection */
        dispose() {
            removeResizeListener(this);

            super.dispose && super.dispose();
        }

        /**
         * Hndles the wndow resize
         * @param {Node|Window} source - the source of the resize
         */
        onResize(source) {
            console.error('onResize should be overridden');
        }
    };
